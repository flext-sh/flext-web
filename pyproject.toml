[build-system]
    build-backend = "poetry.core.masonry.api"
    requires = [
        "poetry-core>=1.9.0",
    ]

[project]
    classifiers = [
        "Development Status :: 5 - Production/Stable",
        "Framework :: Flask",
        "Intended Audience :: Developers",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
        "Programming Language :: Python :: 3 :: Only",
        "Programming Language :: Python :: 3.13",
        "Topic :: Internet :: WWW/HTTP :: Dynamic Content",
        "Topic :: Software Development :: Libraries :: Python Modules",
        "Typing :: Typed",
    ]
    dependencies = [
        "flask (>=3.0.0)",
        "pydantic (>=2.11.7)",
        "pydantic-settings (>=2.10.1)",
    ]
    description = "FLEXT Web - Modern Web Interface for FLEXT Platform"
    keywords = [
        "",
        "enterprise",
        "flask",
        "flext",
        "frontend",
        "typed",
        "web",
    ]
    name = "flext-web"
    readme = "README.md"
    requires-python = ">=3.13,<3.14"
    version = "0.9.0"
    [[project.authors]]
        email = "team@flext.sh"
        name  = "FLEXT Team"

    [[project.maintainers]]
        email = "team@flext.sh"
        name  = "FLEXT Team"

    [project.license]
        text = "MIT"

    [project.urls]
        Documentation = "https://github.com/flext-sh/flext/blob/main/README.md"
        Homepage      = "https://github.com/flext-sh/flext"
        Repository    = "https://github.com/flext-sh/flext"

    [project.scripts]
        flext-web = "flext_web.__main__:main"

    [project.optional-dependencies]
        dev = [
            "autoflake>=2.3.1",
            "black>=25.1.0",
            "codespell>=2.3.0",
            "isort>=6.0.1",
            "pre-commit>=4.0.1",
            "pylint>=3.3.0",
            "pyupgrade>=3.19.0",
            "radon>=6.0.1",
            "ruff>=0.12.3",
            "vulture>=2.13",
        ]
        security = [
            "bandit>=1.8.0",
            "pip-audit>=2.7.3",
        ]
        test = [
            "factory-boy>=3.3.1",
            "faker>=37.4.0",
            "hypothesis>=6.125.0",
            "pytest-benchmark>=5.1.0",
            "pytest-clarity>=1.0.1",
            "pytest-cov>=6.2.0",
            "pytest-deadfixtures>=2.2.1",
            "pytest-env>=1.1.5",
            "pytest-mock>=3.14.0",
            "pytest-randomly>=3.16.0",
            "pytest-sugar>=1.0.0",
            "pytest-timeout>=2.4.0",
            "pytest-xdist>=3.8.0",
            "pytest>=8.4.0",
        ]
        typings = [
            "types-psutil>=7.0.0",
            "types-python-dateutil>=2.9.0",
            "types-pyyaml>=6.0.12",
            "types-redis>=4.6.0",
            "types-requests>=2.32.4",
            "types-setuptools>=80.9.0",
            "types-toml>=0.10.8.20240310",
        ]

[tool.ruff]
    extend = "../ruff-shared.toml"

[tool.bandit]
    exclude_dirs = [
        "build",
        "dist",
        "tests",
    ]
    skips = [
        "B101",
        "B601",
    ]

[tool.deptry]
    known_first_party = [
        "flext_web",
    ]

[tool.pyrefly]
    python-version = "3.13"
    search-path = [
        "examples",
        "src",
        "tests",
    ]

[tool.pytest.ini_options]
    addopts = [
        "--maxfail=1",
        "--strict-config",
        "--tb=short",
        "-ra",
    ]
    markers = [
        "api: API tests",
        "benchmark: Benchmark tests",
        "concurrency: Concurrency tests",
        "db: Database tests",
        "e2e: End-to-end tests",
        "integration: Integration tests",
        "memory: Memory tests",
        "network: Network tests",
        "performance: Performance tests",
        "race_condition: Race condition tests",
        "slow: Slow tests",
        "smoke: Smoke tests",
        "stress: Stress tests",
        "unit: Unit tests",
        "web: Web interface tests",
    ]
    minversion = "8.0"
    testpaths = [
        "tests",
    ]

[tool.coverage.run]
    branch = true
    omit = [
        "*/.venv/*",
        "*/__pycache__/*",
        "*/test_*",
        "*/tests/*",
        "*/venv/*",
    ]
    source = [
        "src",
    ]

[tool.coverage.report]
    exclude_lines = [
        "@(abc\\.)?abstractmethod",
        "class .*\\bProtocol\\):",
        "def __repr__",
        "if 0:",
        "if __name__ == .__main__.:",
        "if self.debug:",
        "if settings.DEBUG",
        "pragma: no cover",
        "raise AssertionError",
        "raise NotImplementedError",
    ]

[tool.coverage.html]
    directory = "reports/coverage"

[tool.coverage.xml]
    output = "reports/coverage.xml"

[tool.poetry.dependencies]
    python = ">=3.13,<3.14"

    [tool.ruff.lint.isort]
        known-first-party = [
            "flext_web",
        ]

    [tool.poetry.dependencies.flext-core]
        develop = true
        path    = "../flext-core"

    [tool.poetry.dependencies.flext-observability]
        develop = true
        path    = "../flext-observability"

    [tool.poetry.dependencies.flext-auth]
        develop = true
        path    = "../flext-auth"

    [tool.poetry.dependencies.flext-api]
        develop = true
        path    = "../flext-api"

[tool.poetry.group.dev.dependencies]
    commitizen     = ">=4.8.3"
    detect-secrets = ">=1.5.0"
    pyrefly        = "^0.34.0"
